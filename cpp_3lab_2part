#include <iostream>
using namespace std;

// Функция суммы элементов массива через указатели
int arraySum(int* start, int* end) {
    int sum = 0;
    int* current = start; //Указатель на текущий элемент
    while (current != end) { //Пока не дошли до конца
        sum += *current; //Добавляем значение текущего элемента
        current++; //Переходим к следующему элементу
    }
    return sum;
}

//Функции суммы и разности
int add(int a, int b) {
    return a + b;
}

int subtract(int a, int b) {
    return a - b;
}

//Функция, возвращающая указатель на функцию
int (*getOperation(char op))(int, int) {
    if (op == '+') return add; //Если +, возвращаем указатель на функцию сложения
    if (op == '-') return subtract; //Если -, возвращаем указатель на функцию вычитания
    return nullptr; //Если другой символ - возвращаем нулевой указатель
}

int main() {
    setlocale(LC_ALL, "Russian");
    int arr[] = {1, 2, 3, 4, 5};
    int size = sizeof(arr) / sizeof(arr[0]); //размер массива
    cout <<"Сумма элементов массива: " << arraySum(arr, arr + size) << endl;
    
    //Проверка функций через указатели
    int x = 10, y = 3;
    char operation;
    
    cout <<"Введите + или -: ";
    cin >> operation;
    
    //получаем указатель на нужную функцию
    int (*operationPtr)(int, int) = getOperation(operation);
    
    if (operationPtr != nullptr) {
        int result = operationPtr(x, y); //Вызываем функцию через указатель
        cout <<"Результат: " << x << " " << operation << " " << y << " = " << result << endl;
    } else {
        cout <<"Неверная операция" << endl;
    }
    
    // 7-8. Работа с динамической памятью
    float* dynamicFloat = new float(3.14); //Создаем в динамической памяти
    cout << "Динамическая переменная: " << *dynamicFloat << endl;
    delete dynamicFloat; //Освобождаем память
    dynamicFloat = nullptr; //Обнуляем указатель
    
    return 0;
}
